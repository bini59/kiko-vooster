# 데이터베이스 코드 리뷰 체크리스트

## 리뷰어: ******\_\_\_******

## 리뷰 일자: ******\_\_\_******

## 1. 스키마 설계 리뷰

### 테이블 구조

- [ ] 모든 테이블이 3NF(제3정규형)를 만족하는가?
- [ ] 테이블 이름이 명확하고 일관성 있는가?
- [ ] 컬럼 이름이 의미를 명확히 전달하는가?
- [ ] 적절한 데이터 타입을 사용했는가?
- [ ] NULL 허용 여부가 비즈니스 로직과 일치하는가?

### 관계 설계

- [ ] 외래 키 관계가 올바르게 설정되었는가?
- [ ] CASCADE 옵션이 적절히 사용되었는가?
- [ ] 순환 참조가 없는가?
- [ ] 다대다 관계가 적절히 해소되었는가?

### 제약조건

- [ ] PRIMARY KEY가 모든 테이블에 설정되었는가?
- [ ] UNIQUE 제약이 필요한 곳에 설정되었는가?
- [ ] CHECK 제약이 데이터 무결성을 보장하는가?
- [ ] DEFAULT 값이 적절히 설정되었는가?

## 2. 성능 최적화 리뷰

### 인덱스

- [ ] 주요 쿼리 패턴에 대한 인덱스가 있는가?
- [ ] 복합 인덱스의 컬럼 순서가 적절한가?
- [ ] 불필요한 인덱스는 없는가?
- [ ] 인덱스 이름이 명확한가?

### 쿼리 최적화

- [ ] N+1 쿼리 문제가 없는가?
- [ ] 대용량 데이터 처리 시 페이징이 고려되었는가?
- [ ] 집계 함수 사용이 최적화되었는가?
- [ ] 서브쿼리보다 JOIN이 더 효율적인 곳은 없는가?

## 3. 보안 리뷰

### Row-Level Security

- [ ] 모든 테이블에 RLS가 활성화되었는가?
- [ ] RLS 정책이 비즈니스 요구사항과 일치하는가?
- [ ] 정책에 보안 취약점이 없는가?
- [ ] 관리자 권한이 적절히 제한되었는가?

### 데이터 보호

- [ ] 민감한 데이터가 암호화되었는가?
- [ ] SQL 인젝션 취약점이 없는가?
- [ ] 권한 에스컬레이션이 불가능한가?
- [ ] 감사(audit) 로그가 필요한 곳에 구현되었는가?

## 4. 마이그레이션 리뷰

### 스크립트 구조

- [ ] 마이그레이션 순서가 의존성을 고려했는가?
- [ ] 각 마이그레이션이 원자적(atomic)인가?
- [ ] 롤백 가능한 구조인가?
- [ ] 멱등성(idempotency)이 보장되는가?

### 데이터 마이그레이션

- [ ] 기존 데이터 변환 로직이 정확한가?
- [ ] 데이터 손실 위험이 없는가?
- [ ] 대용량 데이터 처리 시 성능이 고려되었는가?
- [ ] 백업 계획이 수립되었는가?

## 5. 문서화 리뷰

### 설계 문서

- [ ] ERD가 최신 상태인가?
- [ ] 테이블/컬럼 설명이 충분한가?
- [ ] 비즈니스 로직이 명확히 문서화되었는가?
- [ ] 예제 쿼리가 포함되었는가?

### 코드 주석

- [ ] 복잡한 로직에 주석이 있는가?
- [ ] RLS 정책의 목적이 설명되었는가?
- [ ] 트리거/함수의 동작이 문서화되었는가?
- [ ] 성능 관련 결정사항이 기록되었는가?

## 6. 테스트 리뷰

### 단위 테스트

- [ ] 제약조건 테스트가 있는가?
- [ ] RLS 정책 테스트가 있는가?
- [ ] 트리거 동작 테스트가 있는가?
- [ ] 엣지 케이스가 테스트되었는가?

### 통합 테스트

- [ ] 트랜잭션 롤백이 테스트되었는가?
- [ ] 동시성 문제가 테스트되었는가?
- [ ] 성능 테스트가 수행되었는가?
- [ ] 실제 사용 시나리오가 테스트되었는가?

## 7. 코드 품질

### 명명 규칙

- [ ] 테이블명: 복수형, snake_case
- [ ] 컬럼명: snake_case, 명확한 의미
- [ ] 인덱스명: idx*테이블명*컬럼명
- [ ] 제약조건명: 타입*테이블명*설명

### 일관성

- [ ] 데이터 타입 사용이 일관적인가?
- [ ] 타임스탬프 처리가 일관적인가?
- [ ] NULL 처리 방식이 일관적인가?
- [ ] 명명 규칙이 전체적으로 일관적인가?

## 8. 특별 검토 사항

### Supabase 특화

- [ ] Supabase 함수 사용이 적절한가?
- [ ] Realtime 기능 고려사항이 반영되었는가?
- [ ] Storage 연동이 필요한 경우 고려되었는가?
- [ ] Edge Functions와의 연동이 고려되었는가?

### 확장성

- [ ] 파티셔닝이 필요한 테이블이 식별되었는가?
- [ ] 샤딩 전략이 고려되었는가?
- [ ] 인덱스 전략이 확장 가능한가?
- [ ] 아카이빙 전략이 수립되었는가?

## 승인 기준

### 필수 통과 항목

- [ ] 모든 보안 항목 통과
- [ ] 데이터 무결성 보장
- [ ] 마이그레이션 안정성 확인
- [ ] 핵심 성능 요구사항 충족

### 권장 개선 사항

- [ ] 문서화 개선
- [ ] 테스트 커버리지 확대
- [ ] 성능 최적화 추가
- [ ] 모니터링 강화

## 리뷰 결과

### 승인 상태

- [ ] ✅ 승인 (변경사항 없음)
- [ ] ⚠️ 조건부 승인 (minor 수정 후)
- [ ] ❌ 재검토 필요 (major 수정 필요)

### 주요 피드백

```
[리뷰어 의견 작성]
```

### 개선 제안

```
[선택적 개선사항 작성]
```

---

**리뷰어 서명**: **********\_\_\_**********  
**날짜**: **********\_\_\_**********
