# 단어장 통합 테스트 계획서

## 📋 개요

이 문서는 Kiko 프로젝트의 **단어장 시스템 통합 테스트** (T-011-003) 작업에 대한 포괄적인 테스트 계획을 정의합니다.

## 🎯 테스트 목표

### 주요 목표
1. **전체 워크플로우 검증**: 단어 저장 → 조회 → 복습 → 삭제 전체 플로우
2. **API 연동 안정성**: 백엔드 API와의 완전한 연동 및 에러 처리
3. **사용자 경험 품질**: 실제 사용자 관점에서의 데이터 일관성
4. **성능 및 접근성**: 응답 시간, 접근성 기준 준수

### 성공 기준
- [ ] 전체 워크플로우 테스트 100% 통과
- [ ] API 에러 처리 시나리오 모두 검증
- [ ] 성능 목표 달성 (p95 < 300ms)
- [ ] 접근성 WCAG 2.1 AA 준수

## 🧪 테스트 환경

### 필수 구성 요소
- **Frontend**: SvelteKit 개발 서버 (http://localhost:5173)
- **Backend**: FastAPI 서버 (http://localhost:8000)
- **Database**: Supabase PostgreSQL (개발 환경)
- **테스트 페이지**: `/test/vocabulary`

### 테스트 모드
1. **Mock API 모드**: 백엔드 없이 가상 데이터로 테스트
2. **Real API 모드**: 실제 백엔드와 연동 테스트

## 📝 테스트 시나리오

### 1. 기본 API 연동 테스트

#### 1.1 단어장 리스트 조회 API
**목적**: 기본적인 단어장 데이터 로드 검증

**테스트 단계**:
1. 단어장 통합 테스트 페이지 접속
2. "전체 테스트 실행" 버튼 클릭
3. API 기본 기능 테스트 결과 확인

**예상 결과**:
- ✅ API 응답 성공 (200 OK)
- ✅ 응답 시간 < 1000ms
- ✅ 데이터 구조 유효성 검증

#### 1.2 단어 검색 API
**목적**: 검색 기능의 정확성 및 성능 검증

**테스트 케이스**:
- 일본어 텍스트 검색
- 한국어 의미 검색
- 빈 검색어 처리
- 검색 결과 없음 처리

### 2. 단어장 CRUD 워크플로우 테스트

#### 2.1 단어 추가 (CREATE)
**목적**: 새로운 단어를 단어장에 추가하는 전체 플로우 검증

**테스트 단계**:
1. 테스트용 단어 데이터 준비
2. `vocabularyStore.addWord()` 호출
3. API 요청/응답 검증
4. 스토어 상태 업데이트 확인
5. UI 반영 확인

**테스트 데이터**:
```typescript
const testWords = [
  { text: 'こんにちは', reading: 'こんにちは', meaning: '안녕하세요' },
  { text: '学校', reading: 'がっこう', meaning: '학교' },
  { text: '勉強', reading: 'べんきょう', meaning: '공부' }
];
```

**예상 결과**:
- ✅ API 요청 성공
- ✅ 단어장 리스트에 새 단어 표시
- ✅ 알림 메시지 표시
- ✅ 낙관적 UI 업데이트 동작

#### 2.2 단어 조회 (READ)
**목적**: 저장된 단어의 조회 및 필터링 기능 검증

**테스트 시나리오**:
- 전체 단어 리스트 조회
- 페이지네이션 동작
- 검색 필터 적용
- 정렬 기능

#### 2.3 단어 수정 (UPDATE)
**목적**: 기존 단어의 편집 기능 검증

**테스트 단계**:
1. 기존 단어 선택
2. 편집 모달 열기
3. 단어 정보 수정
4. 저장 및 반영 확인

#### 2.4 단어 삭제 (DELETE)
**목적**: 단어 삭제 기능 및 확인 프로세스 검증

**테스트 단계**:
1. 삭제할 단어 선택
2. 삭제 확인 다이얼로그
3. 삭제 실행
4. 리스트에서 제거 확인

### 3. 복습 모드 통합 테스트

#### 3.1 플래시카드 모드
**목적**: 플래시카드 복습 기능의 전체 워크플로우 검증

**테스트 단계**:
1. 복습 모드 시작: `vocabularyStore.startReview('flashcard')`
2. 복습 세션 진행
3. 답변 처리 (정답/오답)
4. 진행도 업데이트
5. 복습 결과 저장

**검증 항목**:
- ✅ 복습 단어 로드
- ✅ 카드 뒤집기 애니메이션
- ✅ 진행도 표시
- ✅ 결과 저장

#### 3.2 빈칸 채우기 모드
**목적**: 빈칸 채우기 복습 기능 검증

**테스트 시나리오**:
- 빈칸 생성 로직
- 사용자 입력 검증
- 정답/오답 처리
- 힌트 시스템

#### 3.3 철자 게임 모드
**목적**: 철자 게임 복습 기능 검증

**테스트 시나리오**:
- 문자 섞기 로직
- 드래그 앤 드롭 인터랙션
- 정답 검증
- 시간 제한 처리

### 4. 에러 처리 및 예외 상황 테스트

#### 4.1 네트워크 에러 시뮬레이션
**목적**: 네트워크 오류 시 적절한 처리 확인

**테스트 케이스**:
- API 서버 다운 상황
- 네트워크 연결 끊김
- 요청 타임아웃
- 5xx 서버 에러

**예상 동작**:
- ✅ 사용자 친화적 에러 메시지 표시
- ✅ 재시도 옵션 제공
- ✅ 낙관적 UI 상태 복구

#### 4.2 잘못된 데이터 처리
**목적**: 유효하지 않은 데이터에 대한 검증

**테스트 케이스**:
- 존재하지 않는 단어 ID
- 잘못된 형식의 단어 데이터
- 빈 검색 결과
- 권한 없는 접근

#### 4.3 동시성 이슈 테스트
**목적**: 동시 요청 시 데이터 일관성 검증

**테스트 시나리오**:
- 빠른 연속 요청
- 중복 단어 추가 시도
- 동시 편집 충돌

### 5. 성능 및 사용성 테스트

#### 5.1 응답 시간 측정
**목적**: API 응답 시간이 요구사항을 만족하는지 검증

**성능 기준**:
- 단어 리스트 로드: < 500ms
- 단어 추가/삭제: < 300ms
- 복습 모드 시작: < 200ms
- 대용량 데이터 (100개): < 2000ms

**측정 방법**:
```typescript
const startTime = performance.now();
await vocabularyStore.loadWords({ limit: 100 });
const responseTime = performance.now() - startTime;
```

#### 5.2 메모리 사용량 모니터링
**목적**: 메모리 누수 및 과도한 사용량 방지

**모니터링 항목**:
- 컴포넌트 마운트/언마운트
- 스토어 상태 크기
- 이벤트 리스너 정리

#### 5.3 접근성 검증
**목적**: WCAG 2.1 AA 기준 준수 확인

**검증 항목**:
- ✅ 키보드 네비게이션
- ✅ 스크린 리더 지원
- ✅ 색상 대비
- ✅ 포커스 관리

## 🔄 자동화된 테스트 플로우

### 전체 테스트 시퀀스
1. **초기화**: 테스트 환경 준비
2. **API 기본 테스트**: 연결 및 기본 기능 확인
3. **CRUD 워크플로우**: 전체 생명주기 테스트
4. **복습 모드**: 3가지 모드 모두 테스트
5. **에러 처리**: 예외 상황 시뮬레이션
6. **성능 측정**: 응답 시간 및 리소스 사용량
7. **결과 취합**: 테스트 리포트 생성

### 테스트 실행 방법
```bash
# 개발 서버 시작
npm run dev

# 테스트 페이지 접속
http://localhost:5173/test/vocabulary

# 전체 테스트 실행
"전체 테스트 실행" 버튼 클릭
```

## 📊 테스트 리포트

### 리포트 구성 요소
1. **테스트 개요**: 실행 시간, 환경 정보
2. **결과 요약**: 통과/실패 통계
3. **상세 결과**: 각 테스트별 결과 및 메트릭
4. **성능 지표**: 응답 시간, 리소스 사용량
5. **오류 로그**: 실패한 테스트의 상세 정보

### 리포트 형식
- **JSON 파일**: 프로그래밍적 분석용
- **실시간 로그**: 브라우저 콘솔 및 UI 로그

### 샘플 리포트 구조
```json
{
  "timestamp": "2024-01-15T10:30:00Z",
  "testType": "vocabulary-integration",
  "summary": {
    "total": 15,
    "passed": 14,
    "failed": 1
  },
  "testResults": [
    {
      "name": "API: 단어장 리스트 조회",
      "passed": true,
      "details": { "responseTime": "245.3ms" }
    }
  ],
  "performance": {
    "averageResponseTime": "285ms",
    "maxResponseTime": "1205ms"
  }
}
```

## ✅ 체크리스트

### 사전 준비
- [ ] 개발 환경 설정 완료
- [ ] 백엔드 서버 실행 중
- [ ] 테스트 데이터 준비
- [ ] 브라우저 개발자 도구 열기

### 테스트 실행
- [ ] 통합 테스트 페이지 접속
- [ ] 전체 워크플로우 테스트 실행
- [ ] 개별 컴포넌트 테스트 확인
- [ ] 에러 시나리오 테스트
- [ ] 성능 메트릭 확인

### 결과 검증
- [ ] 모든 기본 테스트 통과
- [ ] CRUD 워크플로우 완전 동작
- [ ] 복습 모드 3가지 모두 동작
- [ ] 에러 처리 적절함
- [ ] 성능 기준 충족
- [ ] 접근성 검증 완료

### 문서화
- [ ] 테스트 리포트 다운로드
- [ ] 이슈 및 개선사항 정리
- [ ] 최종 검증 결과 기록

## 🚨 알려진 제한사항

1. **백엔드 의존성**: 실제 API 테스트는 백엔드 서버 필요
2. **Mock 데이터**: 일부 테스트는 가상 데이터로 진행
3. **브라우저 환경**: 특정 브라우저에서만 테스트 가능
4. **수동 검증**: 일부 UI/UX 요소는 수동 확인 필요

## 📈 향후 개선 계획

1. **자동화 확장**: Playwright 등을 통한 E2E 자동화
2. **성능 모니터링**: 지속적인 성능 추적 시스템
3. **회귀 테스트**: CI/CD 파이프라인 통합
4. **크로스 브라우저**: 다양한 브라우저 환경 테스트

---

이 문서는 단어장 시스템의 품질 보증을 위한 포괄적인 테스트 가이드입니다. 모든 항목을 체계적으로 검증하여 안정적이고 사용자 친화적인 단어장 기능을 보장합니다. 